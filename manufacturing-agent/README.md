# Manufacturing Agent – Project Overview

## 1.  How it Works (Bird's-eye view)

```
┌────────────┐    loads          ┌─────────┐
│  crew.py   │ ───────────────▶  │ Agents  │
└────────────┘                   └─────────┘
       │ build crew                    ▲
       ▼                               │
┌────────────┐    executes      ┌────────────┐
│  tasks.yaml│ ───────────────▶ │   Tasks    │
└────────────┘                  └────────────┘
       │                               ▲
       ▼                               │ uses
┌────────────┐                   ┌────────────┐
│  tools/*   │◀──────────────────│ agents.yaml│
└────────────┘                   └────────────┘
```

* `crew.py` wires everything together: it loads **agents**, binds **tools**, and schedules **tasks**.
* The **YAML configuration** in `config/` lets you change behaviour without touching Python.
* Each **tool** in `tools/` is a thin wrapper around some capability (file I/O, custom logic, asking a human, …).
* `main.py` (or `crewai run`) is the CLI entry-point that spins up the crew and runs the workflow. The current code inside `main.py` is  a placeholder due to our integration with Flowcept. Inside Flowcept, we directly connect AMC agent with the streaming.

---

## 2.  Repository & File Reference

<details>
<summary>Package root (<code>manufacturing_agent/</code>)</summary>

| Path | Purpose | How to modify |
|------|---------|---------------|
| `pyproject.toml` | Declares Python dependencies & package metadata. | Add/remove libraries; remember to update the lock file with `uv pip compile`. |
| `uv.lock` | Frozen dependency versions (generated). | Never edit by hand – regenerate after changing `pyproject.toml`. |
| `output/` | Run-time artefacts. | Safe to delete between runs. |
| `src/` | **All application code lives here.** | — |
</details>

<details>
<summary>Application code (<code>src/manufacturing_agent/</code>)</summary>

| Path | Purpose | How to modify |
|------|---------|---------------|
| `__init__.py` | Marks the directory as a Python package. Designed for Flowcept | Add exports for helper functions if you want them `import`-able at package level. |
| `config/agents.yaml` | Declarative definition of *who* the agents are: names, system prompts, tools they may use, etc. | Tweak roles, goals, or add new agents. No Python changes needed. |
| `config/tasks.yaml` | Declarative definition of *what* the agents should do. | Add or reorder tasks; reference new agents you created. |
| `crew.py` | Builds the crew by reading the configs, initialising agents, attaching tools, and setting execution parameters. | Extend the pipeline, add custom callbacks, or inject Flowcept instrumentation here. |
| `main.py` | CLI entry-point executed by `crewai run` or `python -m manufacturing_agent.main`. | Parse extra CLI args, add environment validation, or call `crew.run()` programmatically. |
| `tools/__init__.py` | Exposes the tools to the rest of the package. | Register new tools here. |
| `tools/file_tools.py` | Read/write helpers for the file-system (e.g. saving reports). | Add new file-handling methods as the project grows. |
| `tools/custom_tool.py` | Example of a bespoke tool provided by CrewAI; currently a placeholder for domain-specific logic. 
| `tools/*.__pycache__/` | Byte-code cache generated by Python. | Can be ignored / deleted at any time. |
</details>

---

## 3.  Onboard - Installation

1. **Python ≥ 3.10 < 3.14** is required.  
2. Install [uv](https://docs.astral.sh/uv/) once:
   ```bash
   pip install uv
   ```
3. Inside this folder, install dependencies:
   ```bash
   uv pip install -r uv.lock   # fast, locked install
   # OR
   uv pip install -r pyproject.toml  # solve fresh
   ```

If you add dependencies, run `uv pip compile` to regenerate `uv.lock` and commit both files.

---

## 4.  Running the Crew

```bash
# from manufacturing-agent/
crewai run                  # preferred – uses config files

After execution you should see:
* Console logs of each agent's thoughts & actions.  
* New artefacts in `manufacturing_agent/output/` (e.g. `manufacturing_runs.db`, generated reports).
